<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Botanical 3D Viewer</title>
<style>
  html, body { margin:0; padding:0; height:100%; background:#000; color:#fff; font-family: Arial, system-ui; }
  #app { display:flex; flex-direction:column; height:100vh; }
  #viewer { flex:1; position:relative; }
  canvas { display:block; }
  #buttonContainer { position:absolute; right:10px; bottom:10px; z-index:10; }
  #sorryBtn { background:#222; border:1px solid #555; padding:10px 12px; border-radius:8px; cursor:pointer; color:#fff; font-size:16px; }
  #sorryOverlay { position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); display:flex; justify-content:center; align-items:center; text-align:center; color:#fff; font-size:18px; padding:20px; box-sizing:border-box; display:none; z-index:999; }
</style>
</head>
<body>
<div id="app">
  <div id="viewer"><canvas id="canvas"></canvas></div>
  <div id="buttonContainer">
    <button id="sorryBtn">ðŸ”’</button>
  </div>
  <div id="sorryOverlay">
    <div id="sorryMessage"></div>
  </div>
</div>

<script type="module">
import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js';
import { ObjViewer } from 'https://cdn.jsdelivr.net/gh/movabo/ObjViewer/js/ObjViewer.js';

// ---- Canvas setup ----
const canvas = document.getElementById('canvas');
function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight * 0.7; // 70% height on mobile
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

// ---- OBJ/MTL files ----
const files = ['models/rose/rose.obj', 'models/rose/rose.mtl'];

// ---- Create viewer ----
const viewer = new ObjViewer(THREE, canvas, files, {
  onLoad: ()=> console.log('Model loaded successfully'),
  onError: e=> console.error('Error loading model:', e)
});
viewer.load();
viewer.startAnimation();

// ---- Sorry Mode ----
const sorryBtn = document.getElementById('sorryBtn');
const sorryOverlay = document.getElementById('sorryOverlay');
const sorryMessage = document.getElementById('sorryMessage');

let clickCount = 0;
const maxClicks = 22;

const message = `I am truly sorry for all the moments I may have hurt or disappointed you. 
I want you to know that you mean everything to me, and I deeply regret any pain I've caused. 
I love you, and I promise to do better every single day.`;

sorryBtn.addEventListener('click', ()=>{
  clickCount++;
  if(clickCount >= maxClicks){
    sorryOverlay.style.display = 'flex';
    sorryMessage.textContent = message;
  }
});

sorryOverlay.addEventListener('click', ()=>{
  sorryOverlay.style.display = 'none';
  clickCount = 0; // reset counter
});
</script>
</body>
</html>
